# Database Configuration (MySQL 8.0)
# 示例：mysql://<user>:<password>@<host>:<port>/<database>?parseTime=true&loc=Local
DATABASE_URL="mysql://root:your_password@localhost:3306/autoads_dev?parseTime=true&loc=Local"
DB_PASSWORD="your_secure_password"

# Redis Configuration
# 生产环境（ClawCloud）
REDIS_URL="redis://default:your_redis_password@your_redis_host:your_redis_port"
# 开发环境（本地）
# REDIS_URL="redis://localhost:6379/0"
# 或者使用单独的配置项
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_DB=0

# ========================================
# 核心配置 - 只需要设置这些
# ========================================

# 域名配置（核心）- 其他域名相关配置会自动适配
NEXT_PUBLIC_DOMAIN="localhost:3000"  # 开发环境 | autoads.dev (生产) | www.urlchecker.dev (预览)
NEXT_PUBLIC_DEPLOYMENT_ENV="development"  # development/preview/production

# NextAuth v5 Configuration
# 注意：若启用加密的 JWT 会话，建议使用 64 字节（512-bit）密钥
# 生成示例：
#   openssl rand -base64 64
#   # 或者十六进制：node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
AUTH_SECRET="your-auth-secret-key"

# Google OAuth Configuration
AUTH_GOOGLE_ID="your-google-oauth-client-id.apps.googleusercontent.com"
AUTH_GOOGLE_SECRET="your-google-oauth-client-secret"

# ========================================
# 自动适配说明
# ========================================
# 基于 NEXT_PUBLIC_DOMAIN 自动设置：
# - AUTH_URL: http://localhost:3000 (开发) | https://www.urlchecker.dev (预览) | https://autoads.dev (生产)
# - JWT issuer/audience: localhost:3000 | www.urlchecker.dev | autoads.dev
# - Cookie domain: localhost:3000 | .urlchecker.dev | .autoads.dev
# - API base URL: http://localhost:3000/api | https://www.urlchecker.dev/api | https://autoads.dev/api

# ========================================
# 可选配置
# ========================================
# AUTH_DEBUG="true"  # 开启认证调试日志
# AUTH_URL="custom-url"  # 手动覆盖AUTH_URL（通常不需要）

# Google Ads API Configuration
GOOGLE_ADS_CLIENT_ID="your-client-id.googleusercontent.com"
GOOGLE_ADS_CLIENT_SECRET="your-client-secret"
GOOGLE_ADS_DEVELOPER_TOKEN="your-developer-token"
GOOGLE_ADS_CUSTOMER_ID="1234567890"

# SimilarWeb API Configuration
SIMILARWEB_API_URL="https://data.similarweb.com/api/v1/data"

# BatchOpen AutoClick Configuration
# 美国地区默认代理获取接口（可在管理台热更新）
Proxy_URL_US="https://api.iprocket.io/api?username=com49692430&password=Qxi9V59e3kNOW6pnRi3i&cc=ROW&ips=1&type=-res-&proxyType=http&responseType=txt"
# 每小时点击次数偏离平均值的程度（0~1），0.3 表示 ±30% 浮动
AutoClick_Count_Variance_Hour=0.3
# 浏览器执行器回退地址（可选；优先从系统配置 AutoClick_Browser_Executor_URL 读取）
AUTOCLICK_BROWSER_EXECUTOR_URL="http://localhost:3000/api/executor/puppeteer"

# Application Configuration
NODE_ENV="development"
LOG_LEVEL="debug"

# Internal JWT (Next -> Go, RSA)
# Next signs internal requests to Go with RS256; paste keys in PEM format
INTERNAL_JWT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
INTERNAL_JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----\n"
INTERNAL_JWT_TTL_SECONDS=120
INTERNAL_JWT_ISS=autoads-next
INTERNAL_JWT_AUD=internal-go
# Enforce verification in Go (optional)
INTERNAL_JWT_ENFORCE=false

# Backend proxy target (Next -> Go)
# If unset, defaults to http://127.0.0.1:8080 inside the container
BACKEND_URL="http://127.0.0.1:8080"

# Security Configuration
NEXT_PUBLIC_ADSPOWER_BASE_URL="http://local.adspower.net:50325"
ALLOWED_ORIGINS="http://localhost:3000,http://127.0.0.1:3000"

# Toggle using Go atomic endpoints for BatchOpen (silent)
NEXT_PUBLIC_USE_GO_BATCHOPEN=false
# Toggle using Go atomic endpoints for AdsCenter
NEXT_PUBLIC_USE_GO_ADSCENTER=false

# Optional: AdsPower Configuration
ADSPOWER_API_URL="http://localhost:50325"
ADSPOWER_GROUP_ID="0"
ADSPOWER_PROFILE_ID="your-profile-id"

# Slack Integration (Optional)
SLACK_WEBHOOK_URL="https://hooks.slack.com/services/YOUR_WORKSPACE/YOUR_CHANNEL/YOUR_TOKEN"

# Connection Pool Settings
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=2
DB_CONNECTION_TIMEOUT=10000
DB_IDLE_TIMEOUT=30000

# Rate Limiting Configuration (per-minute quotas; can be tuned in runtime)
# Soft limits at Next-side; final policy may also be enforced server-side/Go
RATE_LIMIT_API_PER_MINUTE=100
RATE_LIMIT_SITERANK_PER_MINUTE=30
RATE_LIMIT_ADSCENTER_PER_MINUTE=20
RATE_LIMIT_BATCHOPEN_PER_MINUTE=10
RATE_LIMIT_AUTH_PER_MINUTE=5

# Cache Settings
CACHE_TTL=300
ENABLE_REQUEST_CACHE=true
SITERANK_CACHE_DISABLED=false  # true to disable SiteRank cache (emergency switch)

# Monitoring & Logging
ENABLE_API_MONITORING=true
ENABLE_PERFORMANCE_MONITORING=true
LOG_LEVEL=info

# Frontend light rate limiting (Next-side soft limit; final limit enforced by Go)
FRONTEND_LIGHT_RPM=300

# Feature Flags
# 支付/Stripe 相关前端入口与界面开关（默认关闭）。
# 置为 'true' 可在前端显示支付配置、支付记录、订阅变更等入口与模块。
NEXT_PUBLIC_PAYMENTS_ENABLED=false

# Production Security Settings (for reference)
# NODE_ENV="production"
# NEXT_PUBLIC_ADSPOWER_BASE_URL="https://api.adspower.net:50325"
# ALLOWED_ORIGINS="https://autoads.dev,https://www.autoads.dev"
