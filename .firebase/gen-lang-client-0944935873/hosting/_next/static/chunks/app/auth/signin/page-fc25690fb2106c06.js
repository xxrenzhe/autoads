(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4680],{19212:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>N,dynamic:()=>o});var l=a(54568),r=a(89223),t=a(62942),c=a(7620),n=a(47227),x=a(63353),i=a(25980),d=a(69641),m=a(80035),h=a(18529),j=a(2890);let o="force-dynamic";function N(){var e;let s=(0,t.useRouter)(),a=(0,t.useSearchParams)(),{status:o}=(0,r.useSession)(),[N,g]=(0,c.useState)(!1),[u,p]=(0,c.useState)(null!=(e=null==a?void 0:a.get("error"))?e:null),[f,b]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if("authenticated"===o){let e=(null==a?void 0:a.get("callbackUrl"))||"/";s.push(e)}},[o,s,a]);let v=async()=>{g(!0),p(null);try{let e=(null==a?void 0:a.get("callbackUrl"))||"/dashboard";await (0,r.signIn)("google",{callbackUrl:e,redirect:!0})}catch(e){console.error("Sign in error:",e),p("登录失败，请稍后重试"),g(!1)}};return"loading"===o?(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(i.A,{className:"h-8 w-8 animate-spin mx-auto text-blue-600"}),(0,l.jsx)("p",{className:"mt-2 text-gray-600",children:"正在检查登录状态..."})]})}):(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"mx-auto h-16 w-16 bg-gradient-to-br from-blue-500 to-red-500 rounded-full flex items-center justify-center mb-4",children:(0,l.jsx)(d.A,{className:"h-8 w-8 text-white"})}),(0,l.jsx)("h1",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"欢迎回来"}),(0,l.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"使用您的 Gmail 账户快速登录"})]}),u&&(0,l.jsx)(x.Zp,{className:"border-red-200 bg-red-50",children:(0,l.jsx)(x.Wu,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex items-center space-x-2 text-red-700",children:[(0,l.jsx)(m.A,{className:"h-5 w-5"}),(0,l.jsx)("p",{className:"text-sm",children:"AccessDenied"===u?"登录被拒绝，请更换账号或稍后重试":"登录出现错误，请稍后重试"})]})})}),f&&(0,l.jsx)(x.Zp,{className:"border-green-200 bg-green-50",children:(0,l.jsx)(x.Wu,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex items-center space-x-2 text-green-700",children:[(0,l.jsx)(h.A,{className:"h-5 w-5"}),(0,l.jsx)("p",{className:"text-sm",children:"正在跳转到 Google 登录页面..."})]})})}),(0,l.jsxs)(x.Zp,{children:[(0,l.jsxs)(x.aR,{children:[(0,l.jsxs)(x.ZB,{className:"flex items-center text-xl",children:[(0,l.jsx)(j.A,{className:"mr-2 h-6 w-6"}),"使用 Google 登录"]}),(0,l.jsx)(x.BT,{className:"text-base",children:"无需密码，安全便捷"})]}),(0,l.jsxs)(x.Wu,{className:"space-y-6",children:[(0,l.jsx)(n.$,{onClick:v,disabled:N,className:"w-full bg-white hover:bg-gray-50 text-gray-900 border border-gray-300 hover:border-gray-400 shadow-sm",size:"lg",children:N?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.A,{className:"mr-2 h-5 w-5 animate-spin"}),"正在跳转..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j.A,{className:"mr-2 h-5 w-5"}),"使用 Google 账户继续"]})}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center text-xs text-gray-500",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(h.A,{className:"h-3 w-3 text-green-500 mr-1"}),(0,l.jsx)("span",{children:"安全认证"})]}),(0,l.jsx)("span",{className:"mx-2",children:"•"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(h.A,{className:"h-3 w-3 text-green-500 mr-1"}),(0,l.jsx)("span",{children:"快速登录"})]}),(0,l.jsx)("span",{className:"mx-2",children:"•"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(h.A,{className:"h-3 w-3 text-green-500 mr-1"}),(0,l.jsx)("span",{children:"无需密码"})]})]}),(0,l.jsxs)("div",{className:"text-xs text-gray-400 text-center pt-2 border-t",children:[(0,l.jsx)("p",{children:"• 为保障安全，登录后将校验账户健康状态"}),(0,l.jsx)("p",{children:"• 登录即表示您同意我们的服务条款和隐私政策"})]})]})]})]})]})})}},51195:(e,s,a)=>{Promise.resolve().then(a.bind(a,19212))}},e=>{var s=s=>e(e.s=s);e.O(0,[2076,4121,7358],()=>s(51195)),_N_E=e.O()}]);