(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6607],{22555:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var a=t(54568),l=t(7620),c=t(41196),r=t(58482),d=t(30149),i=t(38573),n=t(34503),o=t(17296),h=t(45155),x=t(71402),p=t(69847),m=t(57617);function u(){let[e,s]=(0,l.useState)([]),[t,u]=(0,l.useState)(!0),[j,y]=(0,l.useState)(30),[N,g]=(0,l.useState)(""),[v,f]=(0,l.useState)("");async function b(){u(!0);let e=new URLSearchParams({days:String(j)});N&&e.set("userId",N),v&&e.set("scheduleId",v);try{let t=await fetch("/ops/api/v1/console/autoclick/history?".concat(e)),a=await t.json(),l=((null==a?void 0:a.data)||[]).map(e=>({date:e.date,total:e.total,success:e.success,fail:e.fail}));s(l)}catch(e){}u(!1)}return(0,l.useEffect)(()=>{b()},[]),(0,a.jsx)(c.OZ,{title:"AutoClick 历史统计",description:"最近30天每日执行汇总",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"".concat(r.B8.cards.simple," p-4 grid grid-cols-1 md:grid-cols-4 gap-3"),children:[(0,a.jsx)("input",{className:"border rounded px-3 py-2",placeholder:"用户ID（可选）",value:N,onChange:e=>g(e.target.value)}),(0,a.jsx)("input",{className:"border rounded px-3 py-2",placeholder:"计划ID（可选）",value:v,onChange:e=>f(e.target.value)}),(0,a.jsxs)("select",{className:"border rounded px-3 py-2",value:j,onChange:e=>y(Number(e.target.value)),children:[(0,a.jsx)("option",{value:7,children:"7天"}),(0,a.jsx)("option",{value:14,children:"14天"}),(0,a.jsx)("option",{value:30,children:"30天"})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)("button",{className:r.B8.buttons.primary,onClick:b,children:"查询"})})]}),(0,a.jsx)("div",{className:"".concat(r.B8.cards.simple," p-4 h-[320px]"),children:t?(0,a.jsx)("div",{className:"text-gray-500",children:"加载中..."}):0===e.length?(0,a.jsx)("div",{className:"text-gray-500",children:"暂无数据"}):(0,a.jsx)(d.u,{width:"100%",height:"100%",children:(0,a.jsxs)(i.b,{data:e,margin:{top:10,right:20,left:0,bottom:0},children:[(0,a.jsx)(n.d,{strokeDasharray:"3 3"}),(0,a.jsx)(o.W,{dataKey:"date",tick:{fontSize:12}}),(0,a.jsx)(h.h,{tick:{fontSize:12}}),(0,a.jsx)(x.m,{}),(0,a.jsx)(p.s,{}),(0,a.jsx)(m.N,{type:"monotone",dataKey:"total",stroke:"#8884d8",name:"总数"}),(0,a.jsx)(m.N,{type:"monotone",dataKey:"success",stroke:"#82ca9d",name:"成功"}),(0,a.jsx)(m.N,{type:"monotone",dataKey:"fail",stroke:"#ff6b6b",name:"失败"})]})})}),(0,a.jsx)("div",{className:"".concat(r.B8.cards.simple," p-0 overflow-hidden"),children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"日期"}),(0,a.jsx)("th",{className:"px-3 py-2 text-right",children:"总数"}),(0,a.jsx)("th",{className:"px-3 py-2 text-right",children:"成功"}),(0,a.jsx)("th",{className:"px-3 py-2 text-right",children:"失败"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"px-3 py-2",children:e.date}),(0,a.jsx)("td",{className:"px-3 py-2 text-right",children:e.total}),(0,a.jsx)("td",{className:"px-3 py-2 text-right",children:e.success}),(0,a.jsx)("td",{className:"px-3 py-2 text-right",children:e.fail})]},e.date))})]})})]})})}},36196:(e,s,t)=>{Promise.resolve().then(t.bind(t,22555))}},e=>{var s=s=>e(e.s=s);e.O(0,[2076,4121,7358],()=>s(36196)),_N_E=e.O()}]);