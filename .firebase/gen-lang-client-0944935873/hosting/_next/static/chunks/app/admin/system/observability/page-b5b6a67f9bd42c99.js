(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6428],{4311:(e,s,a)=>{Promise.resolve().then(a.bind(a,48556))},48556:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>n});var r=a(54568);a(7620);var t=a(41196),l=a(58482),i=a(73297);function n(){let{data:e=[],isLoading:s}=(0,i.I)({queryKey:["admin","ops","bff-obs"],queryFn:async()=>{let e=await fetch("/api/admin/ops/bff-obs",{cache:"no-store"});if(!e.ok)throw Error("failed");let s=await e.json();return(null==s?void 0:s.data)||[]},refetchInterval:5e3});return(0,r.jsx)(t.OZ,{title:"BFF 观测",description:"最近上游响应的限流与请求ID",children:(0,r.jsx)("div",{className:"".concat(l.B8.cards.simple," p-6"),children:s?(0,r.jsx)("div",{className:"text-gray-500",children:"加载中..."}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-gray-600",children:[(0,r.jsx)("th",{className:"py-2 pr-4",children:"时间"}),(0,r.jsx)("th",{className:"py-2 pr-4",children:"路径"}),(0,r.jsx)("th",{className:"py-2 pr-4",children:"状态"}),(0,r.jsx)("th",{className:"py-2 pr-4",children:"X-Request-Id"}),(0,r.jsx)("th",{className:"py-2 pr-4",children:"RateLimit"})]})}),(0,r.jsx)("tbody",{children:e.map((e,s)=>{var a,t,l;return(0,r.jsxs)("tr",{className:"border-t",children:[(0,r.jsx)("td",{className:"py-2 pr-4 whitespace-nowrap",children:new Date(e.ts).toLocaleTimeString()}),(0,r.jsx)("td",{className:"py-2 pr-4",children:e.path}),(0,r.jsx)("td",{className:"py-2 pr-4",children:e.status}),(0,r.jsx)("td",{className:"py-2 pr-4",children:e.requestId||"-"}),(0,r.jsx)("td",{className:"py-2 pr-4",children:[null==e||null==(a=e.rateLimit)?void 0:a.limit,null==e||null==(t=e.rateLimit)?void 0:t.remaining,null==e||null==(l=e.rateLimit)?void 0:l.reset].filter(Boolean).join(" / ")||"-"})]},s)})})]})})})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[2076,4121,7358],()=>s(4311)),_N_E=e.O()}]);