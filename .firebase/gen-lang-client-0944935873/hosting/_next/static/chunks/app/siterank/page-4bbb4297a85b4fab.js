(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5798],{29521:(e,s,t)=>{Promise.resolve().then(t.bind(t,66362))},66362:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var a=t(54568),l=t(7620),r=t(47227),n=t(81872),i=t(89329);function c(){let[e,s]=(0,l.useState)([]),[t,c]=(0,l.useState)(null),[d,o]=(0,l.useState)(null),[u,h]=(0,l.useState)(!1),[x,m]=(0,l.useState)(!1);(0,l.useEffect)(()=>{f()},[]),(0,l.useEffect)(()=>{t&&p(t.id)},[t]),(0,l.useEffect)(()=>{let e;return x&&(e=setInterval(()=>{t&&p(t.id)},5e3)),()=>clearInterval(e)},[x,t]);let f=async()=>{try{let e=await i.A.get("/api/offers");s(Object.values(e.data))}catch(e){console.error("Failed to fetch offers",e)}},p=async e=>{try{let{data:s}=await i.A.get("/api/siterank/results/".concat(e));"completed"===s.status&&m(!1),o(s)}catch(e){var s;(null==(s=e.response)?void 0:s.status)!==404&&console.error("Failed to fetch analysis",e)}},y=async()=>{if(t)try{h(!0),await i.A.post("/api/siterank/analyze",{url:t.originalUrl,offerId:t.id}),m(!0)}catch(e){console.error("Failed to start analysis",e)}finally{h(!1)}};return(0,a.jsxs)("div",{className:"container mx-auto py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Siterank AI Analysis"}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)(n.l6,{onValueChange:s=>c(e.find(e=>e.id===s)),children:[(0,a.jsx)(n.bq,{children:(0,a.jsx)(n.yv,{placeholder:"Select an offer to analyze"})}),(0,a.jsx)(n.gC,{children:e.map(e=>(0,a.jsx)(n.eb,{value:e.id,children:e.name},e.id))})]}),(0,a.jsx)(r.$,{onClick:y,disabled:!t||u||x,children:x?"Analysis in progress...":u?"Starting...":"Analyze"})]})}),d&&(0,a.jsxs)("div",{className:"mt-8 bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold mb-4",children:["Analysis Results for ",null==t?void 0:t.name]}),(0,a.jsxs)("p",{className:"mb-4",children:["Status: ",(0,a.jsx)("span",{className:"font-semibold",children:d.status})]}),"completed"===d.status&&d.result&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"AI Opportunity Score"}),(0,a.jsxs)("p",{className:"text-4xl font-bold text-green-600 my-2",children:[d.result.opportunityScore.toFixed(2)," / 100"]}),(0,a.jsx)("h3",{className:"text-xl font-semibold mt-4",children:"AI Strategy Suggestion"}),(0,a.jsx)("p",{className:"mt-2 text-gray-700",children:d.result.strategy})]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[2076,4121,7358],()=>s(29521)),_N_E=e.O()}]);