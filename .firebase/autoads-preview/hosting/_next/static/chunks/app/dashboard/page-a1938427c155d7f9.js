(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{36706:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var a=t(54568),l=t(7620),r=t(89329),n=t(63353),c=t(25980),i=t(27047),d=t(8941),o=t(8826);async function x(){let e=await fetch("/api/billing/onboarding",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error((await e.json().catch(()=>({message:"Failed to fetch onboarding status"}))).message||"An unknown error occurred");return e.json()}var m=t(49642),h=t.n(m),u=t(32496),f=t(92608),j=t(44607);function p(e){let{steps:s,completedStepIds:t}=e,l=[...s].sort((e,s)=>e.step-s.step);return(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Getting Started Guide"}),(0,a.jsx)(n.BT,{children:"Complete these steps to learn the basics and earn free tokens!"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("ul",{className:"space-y-4",children:l.map(e=>{let s=t.includes(e.id);return(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mr-4 mt-1",children:s?(0,a.jsx)(u.A,{className:"h-6 w-6 text-green-500"}):(0,a.jsx)(f.A,{className:"h-6 w-6 text-muted-foreground"})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("h4",{className:(0,j.cn)("font-semibold",s&&"text-muted-foreground line-through"),children:e.title}),(0,a.jsx)("p",{className:(0,j.cn)("text-sm text-muted-foreground",s&&"line-through"),children:e.description}),!s&&(0,a.jsx)(h(),{href:e.targetUrl,children:(0,a.jsxs)("span",{className:"text-sm text-primary hover:underline",children:["Go to page â†’ (+",e.rewardTokens," Tokens)"]})})]})]},e.id)})})})]})}function N(){let[e,s]=(0,l.useState)(null),[t,m]=(0,l.useState)(null),[h,u]=(0,l.useState)(!0),[f,j]=(0,l.useState)(null);return((0,l.useEffect)(()=>{(async()=>{try{u(!0),j(null);let[e,t]=await Promise.all([r.A.get("/api/user/summary").catch(e=>(console.error("Failed to fetch summary",e),{data:{offerCount:0,activeWorkflows:0,tokenBalance:0}})),x().catch(e=>(console.error("Failed to fetch onboarding status",e),null))]);s(e.data),t&&m(t)}catch(e){j("Failed to load dashboard data."),console.error(e)}finally{u(!1)}})()},[]),h)?(0,a.jsxs)("div",{className:"container mx-auto py-8 flex justify-center items-center",children:[(0,a.jsx)(c.A,{className:"h-8 w-8 animate-spin text-muted-foreground"}),(0,a.jsx)("p",{className:"ml-2",children:"Loading Dashboard..."})]}):f?(0,a.jsx)("p",{className:"text-red-500 text-center py-10",children:f}):(0,a.jsxs)("div",{className:"container mx-auto py-8 space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Dashboard"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Token Balance"}),(0,a.jsx)(i.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:e?e.tokenBalance.toLocaleString():"..."})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Active Workflows"}),(0,a.jsx)(d.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:e?e.activeWorkflows:"..."})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Managed Offers"}),(0,a.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:e?e.offerCount:"..."})})]})]})]}),t&&(0,a.jsx)("div",{children:(0,a.jsx)(p,{steps:t.steps,completedStepIds:t.completedStepIds})})]})}},89834:(e,s,t)=>{Promise.resolve().then(t.bind(t,36706))}},e=>{var s=s=>e(e.s=s);e.O(0,[2076,4121,7358],()=>s(89834)),_N_E=e.O()}]);