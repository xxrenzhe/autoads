(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7038],{7879:(e,s,a)=>{Promise.resolve().then(a.bind(a,74278))},74278:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>w});var c=a(54568),l=a(7620),t=a(63353),i=a(3761),n=a(47227),r=a(65165),d=a(70111),x=a(64148),h=a(29179),j=a(18529),o=a(80035),m=a(15051),N=a(51747),p=a(97904),f=a(25980),v=a(98343),u=a(38007),y=a(72825),g=a(68267);function w(){let[e,s]=(0,l.useState)(!1),[a,w]=(0,l.useState)(null),[A,b]=(0,l.useState)(null),[S,k]=(0,l.useState)("");(0,l.useEffect)(()=>{E()},[]);let E=async()=>{try{s(!0);let e=await g.N.getConfigurationStats();b(e)}catch(e){console.error("加载配置失败:",e)}finally{s(!1)}},Z=async()=>{try{s(!0);let e=await g.N.getGoogleAdsAccounts(),a=await g.N.getAffiliateLinks(),c=await g.N.getLinkAccountAssociations(),l={accounts:e,links:a,associations:c,stats:A,exportTime:new Date().toISOString(),version:"1.0"},t=JSON.stringify(l,null,2),i=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(i),r=document.createElement("a");r.href=n,r.download="adscenter-config-".concat(new Date().toISOString().split("T")[0],".json"),r.click(),URL.revokeObjectURL(n),w({type:"success",text:"配置导出成功！"})}catch(e){w({type:"error",text:"导出失败: ".concat(e instanceof Error?e.message:"未知错误")})}finally{s(!1)}},B=async e=>{var a;let c=null==(a=e.target.files)?void 0:a[0];if(c)try{s(!0);let e=await c.text(),a=JSON.parse(e);if(!a.accounts||!a.links||!a.associations)throw Error("无效的配置文件格式");for(let e of a.accounts)await g.N.addGoogleAdsAccount(e);for(let e of a.links)await g.N.addAffiliateLink(e);for(let e of a.associations)await g.N.addLinkAccountAssociation(e);w({type:"success",text:"配置导入成功！"}),E()}catch(e){w({type:"error",text:"导入失败: ".concat(e instanceof Error?e.message:"未知错误")})}finally{s(!1)}},L=async()=>{if(confirm("确定要清除所有配置数据吗？此操作不可恢复！"))try{s(!0),w({type:"info",text:"数据清除功能需要后端支持"})}catch(e){w({type:"error",text:"清除失败: ".concat(e instanceof Error?e.message:"未知错误")})}finally{s(!1)}};return(0,c.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("h1",{className:"text-3xl font-bold mb-2 flex items-center",children:[(0,c.jsx)(h.A,{className:"mr-3 h-8 w-8"}),"系统设置"]}),(0,c.jsx)("p",{className:"text-gray-600",children:"管理系统配置、数据导入导出等"})]}),a&&(0,c.jsxs)(d.Fc,{variant:"error"===a.type?"destructive":"default",children:["success"===a.type&&(0,c.jsx)(j.A,{className:"h-4 w-4"}),"error"===a.type&&(0,c.jsx)(o.A,{className:"h-4 w-4"}),"info"===a.type&&(0,c.jsx)(o.A,{className:"h-4 w-4"}),(0,c.jsx)(d.TN,{children:a.text})]}),(0,c.jsxs)(i.tU,{defaultValue:"overview",className:"w-full",children:[(0,c.jsxs)(i.j7,{className:"grid w-full grid-cols-3",children:[(0,c.jsx)(i.Xi,{value:"overview",children:"概览"}),(0,c.jsx)(i.Xi,{value:"import-export",children:"导入导出"}),(0,c.jsx)(i.Xi,{value:"advanced",children:"高级"})]}),(0,c.jsx)(i.av,{value:"overview",children:(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,c.jsxs)(t.Zp,{children:[(0,c.jsx)(t.aR,{children:(0,c.jsxs)(t.ZB,{className:"flex items-center",children:[(0,c.jsx)(m.A,{className:"mr-2 h-5 w-5"}),"配置统计"]})}),(0,c.jsx)(t.Wu,{children:A?(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{children:"Google Ads 账户:"}),(0,c.jsx)(x.E,{children:A.totalAccounts})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{children:"广告联盟链接:"}),(0,c.jsx)(x.E,{children:A.totalLinks})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{children:"关联配置:"}),(0,c.jsx)(x.E,{children:A.totalAssociations})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{children:"活跃关联:"}),(0,c.jsx)(x.E,{variant:"outline",children:A.activeAssociations})]})]}):(0,c.jsx)("div",{className:"text-center text-gray-500",children:"加载中..."})})]}),(0,c.jsxs)(t.Zp,{children:[(0,c.jsx)(t.aR,{children:(0,c.jsxs)(t.ZB,{className:"flex items-center",children:[(0,c.jsx)(N.A,{className:"mr-2 h-5 w-5"}),"安全信息"]})}),(0,c.jsx)(t.Wu,{children:(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(j.A,{className:"h-4 w-4 text-green-600"}),(0,c.jsx)("span",{className:"text-sm",children:"本地数据存储"})]}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(j.A,{className:"h-4 w-4 text-green-600"}),(0,c.jsx)("span",{className:"text-sm",children:"TypeScript 类型安全"})]}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(j.A,{className:"h-4 w-4 text-green-600"}),(0,c.jsx)("span",{className:"text-sm",children:"错误处理机制"})]}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(o.A,{className:"h-4 w-4 text-orange-500"}),(0,c.jsx)("span",{className:"text-sm",children:"建议定期备份数据"})]})]})})]})]})}),(0,c.jsx)(i.av,{value:"import-export",children:(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)(t.Zp,{children:[(0,c.jsxs)(t.aR,{children:[(0,c.jsxs)(t.ZB,{className:"flex items-center",children:[(0,c.jsx)(p.A,{className:"mr-2 h-5 w-5"}),"导出配置"]}),(0,c.jsx)(t.BT,{children:"导出所有配置数据到 JSON 文件"})]}),(0,c.jsx)(t.Wu,{children:(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsx)("p",{className:"text-sm text-gray-600",children:"导出的配置文件包含所有 Google Ads 账户、广告联盟链接和关联配置。"}),(0,c.jsxs)(n.$,{onClick:Z,disabled:e,children:[e?(0,c.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,c.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"导出配置"]})]})})]}),(0,c.jsxs)(t.Zp,{children:[(0,c.jsxs)(t.aR,{children:[(0,c.jsxs)(t.ZB,{className:"flex items-center",children:[(0,c.jsx)(v.A,{className:"mr-2 h-5 w-5"}),"导入配置"]}),(0,c.jsx)(t.BT,{children:"从 JSON 文件导入配置数据"})]}),(0,c.jsx)(t.Wu,{children:(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsx)("p",{className:"text-sm text-gray-600",children:"选择之前导出的配置文件进行导入。导入的数据将合并到现有配置中。"}),(0,c.jsx)("div",{children:(0,c.jsx)(r.p,{type:"file",accept:".json",onChange:B,disabled:e})})]})})]})]})}),(0,c.jsx)(i.av,{value:"advanced",children:(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)(t.Zp,{children:[(0,c.jsxs)(t.aR,{children:[(0,c.jsxs)(t.ZB,{className:"flex items-center",children:[(0,c.jsx)(u.A,{className:"mr-2 h-5 w-5"}),"数据管理"]}),(0,c.jsx)(t.BT,{children:"高级数据管理操作"})]}),(0,c.jsx)(t.Wu,{children:(0,c.jsx)("div",{className:"space-y-4",children:(0,c.jsxs)("div",{className:"p-4 border rounded-lg bg-red-50",children:[(0,c.jsx)("h4",{className:"font-medium text-red-800 mb-2",children:"危险操作"}),(0,c.jsx)("p",{className:"text-sm text-red-600 mb-3",children:"以下操作将永久删除数据，请谨慎操作。"}),(0,c.jsxs)(n.$,{variant:"destructive",onClick:L,disabled:e,children:[e?(0,c.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,c.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"清除所有数据"]})]})})})]}),(0,c.jsxs)(t.Zp,{children:[(0,c.jsx)(t.aR,{children:(0,c.jsx)(t.ZB,{children:"系统信息"})}),(0,c.jsx)(t.Wu,{children:(0,c.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:"版本:"})," AdsCenter v1.0"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:"框架:"})," Next.js 14 + TypeScript"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:"数据库:"})," 本地 IndexedDB"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:"最后更新:"})," ",new Date().toLocaleDateString()]})]})})]})]})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[2076,4121,7358],()=>s(7879)),_N_E=e.O()}]);