-- Partition ads_metrics_daily by month on MySQL 8+
-- Note: This ALTER rebuilds the table; schedule during low traffic windows on large datasets.
-- Partitions cover 2024-01 to 2027-12 plus MIN/MAX guards. Adjust future windows via follow-up migrations if needed.

ALTER TABLE `ads_metrics_daily`
PARTITION BY RANGE COLUMNS (`date`) (
  PARTITION p_min VALUES LESS THAN ('2024-01-01'),
  PARTITION p_2024_01 VALUES LESS THAN ('2024-02-01'),
  PARTITION p_2024_02 VALUES LESS THAN ('2024-03-01'),
  PARTITION p_2024_03 VALUES LESS THAN ('2024-04-01'),
  PARTITION p_2024_04 VALUES LESS THAN ('2024-05-01'),
  PARTITION p_2024_05 VALUES LESS THAN ('2024-06-01'),
  PARTITION p_2024_06 VALUES LESS THAN ('2024-07-01'),
  PARTITION p_2024_07 VALUES LESS THAN ('2024-08-01'),
  PARTITION p_2024_08 VALUES LESS THAN ('2024-09-01'),
  PARTITION p_2024_09 VALUES LESS THAN ('2024-10-01'),
  PARTITION p_2024_10 VALUES LESS THAN ('2024-11-01'),
  PARTITION p_2024_11 VALUES LESS THAN ('2024-12-01'),
  PARTITION p_2024_12 VALUES LESS THAN ('2025-01-01'),
  PARTITION p_2025_01 VALUES LESS THAN ('2025-02-01'),
  PARTITION p_2025_02 VALUES LESS THAN ('2025-03-01'),
  PARTITION p_2025_03 VALUES LESS THAN ('2025-04-01'),
  PARTITION p_2025_04 VALUES LESS THAN ('2025-05-01'),
  PARTITION p_2025_05 VALUES LESS THAN ('2025-06-01'),
  PARTITION p_2025_06 VALUES LESS THAN ('2025-07-01'),
  PARTITION p_2025_07 VALUES LESS THAN ('2025-08-01'),
  PARTITION p_2025_08 VALUES LESS THAN ('2025-09-01'),
  PARTITION p_2025_09 VALUES LESS THAN ('2025-10-01'),
  PARTITION p_2025_10 VALUES LESS THAN ('2025-11-01'),
  PARTITION p_2025_11 VALUES LESS THAN ('2025-12-01'),
  PARTITION p_2025_12 VALUES LESS THAN ('2026-01-01'),
  PARTITION p_2026_01 VALUES LESS THAN ('2026-02-01'),
  PARTITION p_2026_02 VALUES LESS THAN ('2026-03-01'),
  PARTITION p_2026_03 VALUES LESS THAN ('2026-04-01'),
  PARTITION p_2026_04 VALUES LESS THAN ('2026-05-01'),
  PARTITION p_2026_05 VALUES LESS THAN ('2026-06-01'),
  PARTITION p_2026_06 VALUES LESS THAN ('2026-07-01'),
  PARTITION p_2026_07 VALUES LESS THAN ('2026-08-01'),
  PARTITION p_2026_08 VALUES LESS THAN ('2026-09-01'),
  PARTITION p_2026_09 VALUES LESS THAN ('2026-10-01'),
  PARTITION p_2026_10 VALUES LESS THAN ('2026-11-01'),
  PARTITION p_2026_11 VALUES LESS THAN ('2026-12-01'),
  PARTITION p_2026_12 VALUES LESS THAN ('2027-01-01'),
  PARTITION p_2027_01 VALUES LESS THAN ('2027-02-01'),
  PARTITION p_2027_02 VALUES LESS THAN ('2027-03-01'),
  PARTITION p_2027_03 VALUES LESS THAN ('2027-04-01'),
  PARTITION p_2027_04 VALUES LESS THAN ('2027-05-01'),
  PARTITION p_2027_05 VALUES LESS THAN ('2027-06-01'),
  PARTITION p_2027_06 VALUES LESS THAN ('2027-07-01'),
  PARTITION p_2027_07 VALUES LESS THAN ('2027-08-01'),
  PARTITION p_2027_08 VALUES LESS THAN ('2027-09-01'),
  PARTITION p_2027_09 VALUES LESS THAN ('2027-10-01'),
  PARTITION p_2027_10 VALUES LESS THAN ('2027-11-01'),
  PARTITION p_2027_11 VALUES LESS THAN ('2027-12-01'),
  PARTITION p_2027_12 VALUES LESS THAN ('2028-01-01'),
  PARTITION p_max VALUES LESS THAN (MAXVALUE)
);

